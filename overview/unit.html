<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Unit Expressions - The Patina Programming Language</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="../overview/overview.html"><strong aria-hidden="true">1.</strong> Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../overview/integer.html"><strong aria-hidden="true">1.1.</strong> Integer Expressions</a></li><li class="chapter-item expanded "><a href="../overview/boolean.html"><strong aria-hidden="true">1.2.</strong> Boolean Expressions</a></li><li class="chapter-item expanded "><a href="../overview/unit.html" class="active"><strong aria-hidden="true">1.3.</strong> Unit Expressions</a></li><li class="chapter-item expanded "><a href="../overview/arrays.html"><strong aria-hidden="true">1.4.</strong> Arrays</a></li><li class="chapter-item expanded "><a href="../overview/functions.html"><strong aria-hidden="true">1.5.</strong> Functions</a></li></ol></li><li class="chapter-item expanded "><a href="../ref.html"><strong aria-hidden="true">2.</strong> Reference Manual</a></li><li class="chapter-item expanded "><a href="../setup/setup.html"><strong aria-hidden="true">3.</strong> Setting up OCaml</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../setup/opam.html"><strong aria-hidden="true">3.1.</strong> Installing opam</a></li><li class="chapter-item expanded "><a href="../setup/ocaml.html"><strong aria-hidden="true">3.2.</strong> Installing OCaml</a></li><li class="chapter-item expanded "><a href="../setup/run.html"><strong aria-hidden="true">3.3.</strong> Interacting with OCaml Code</a></li></ol></li><li class="chapter-item expanded "><a href="../assignments/assignments.html"><strong aria-hidden="true">4.</strong> Programming Assignments</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../assignments/as1.html"><strong aria-hidden="true">4.1.</strong> Assignment 1: OCaml</a></li><li class="chapter-item expanded "><a href="../assignments/as2.html"><strong aria-hidden="true">4.2.</strong> Assignment 2: Lexing and Parsing</a></li><li class="chapter-item expanded "><a href="../assignments/as3.html"><strong aria-hidden="true">4.3.</strong> Assignment 3: Type Checking</a></li><li class="chapter-item expanded "><a href="../assignments/as4.html"><strong aria-hidden="true">4.4.</strong> Assignment 4: Code Generation</a></li><li class="chapter-item expanded "><a href="../assignments/as5.html"><strong aria-hidden="true">4.5.</strong> Assignment 5: Optimizations</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Patina Programming Language</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="unit-expressions"><a class="header" href="#unit-expressions">Unit expressions</a></h2>
<p>Patina expressions don't always need to evaluate to an <code>int</code> or <code>bool</code> value. For some expressions, their only purpose is to have some side effect upon the execution of the program. Printing something to standard output is among one of those scenarios. In Patina, evaluating the expression</p>
<pre><code class="language-rust no_run noplayground">print_int(8)
</code></pre>
<p>has the effect of printing the integer <code>8</code> to the standard output, but the expression itself doesn't evaluate to any integer value (i.e., it is meaningless to write <code>print_int(8) + 2</code>).</p>
<p>In Patina, expressions like this have a special type called <code>unit</code>. An expression of <code>unit</code> type evaluates to a special value called the <em>unit value</em>, written as <code>()</code>.  Note that the unit value <code>()</code> is the only value that inhabits type <code>unit</code>. Compare it with type <code>int</code>, which harbors many values, such as <code>0</code>, <code>-3</code>, <code>42</code>, <code>1024</code>, ...</p>
<h3 id="sequencing"><a class="header" href="#sequencing">Sequencing</a></h3>
<p>It is often useful to string together multiple unit expressions with side effects, and evaluate them one by one. Say we would like to print two integers. In Patina, we can express this using a <em>sequence expression</em>:</p>
<pre><code class="language-rust no_run noplayground">{
  print_int(8);
  print_int(9)
}
</code></pre>
<p>This should be understood as a single overall expression <code>e</code> written as <code>{ e1 ; e2 }</code>. The expression <code>e</code> contains two sub-expressions, namely, <code>print_int(8)</code> as <code>e1</code> and <code>print_int(9)</code> as <code>e2</code>.</p>
<p>To evaluate a sequence expression <code>{ e1; e2; ...; en }</code>, we evaluate each <code>ei</code> sequentially, discarding the values of all expressions except for the last expression <code>en</code>.
The value of <code>en</code> will become the value of the overall sequence expression.</p>
<p>So in the previous example, the value of the overall sequence expression is the value of <code>print_int(9)</code>, which is <code>()</code>, the unit value. The value of <code>print_int(8)</code> is suppressed.<sup class="footnote-reference"><a href="#1">1</a></sup></p>
<p>A sequence has to have at least one expression, but it may very well have just a single expression, as you have encountered in a previous if-then-else expression:</p>
<pre><code class="language-rust no_run noplayground">if 0 &lt;= 1 then {
  2 + 3
} else {
  3 * 4
}
</code></pre>
<p>Here, the <code>then</code> branch contains the sequence <code>{ 2 + 3 }</code> consisting of a single expression <code>2 + 3</code> (and similarly with the <code>else</code> branch).</p>
<p>Sequences also appear as while expressions's body and functions' body, both of which we will introduce shortly.</p>
<h3 id="variable-declaration"><a class="header" href="#variable-declaration">Variable Declaration</a></h3>
<p>Sequence expressions not only are useful for specifying sequential computation with side effects, but they also delineate how long variables declared inside them should live. Let's first see how variables are declared in Patina.</p>
<p>Variable declaration is another kind of side effect in addition to printing to standard output. In Patina, variables are created using <em>let-expressions</em>:</p>
<pre><code class="language-rust no_run noplayground">let x: T = e
</code></pre>
<p>This expression will create a new variable <code>x</code> of type <code>T</code>, which is initialized with the value of expression <code>e</code>. Then, <code>x</code> becomes available (&quot;in-scope&quot;) in subsequent expressions <em>within the same sequence</em>.</p>
<p>For example,</p>
<pre><code class="language-rust no_run noplayground">{
  let x: int = 5;
  let y: int = x + 1;
  print_int(x * y)
}
</code></pre>
<p>will print out <code>30</code>, but</p>
<pre><code class="language-rust no_run noplayground">{
  {
    let x: int = 5;
    let y: int = x + 1
  };
  print_int(x * y)
}
</code></pre>
<p>will result in a compile-time error due to the last line: variables <code>x</code> and <code>y</code> are only available inside the inner sequence, and are not available in the outer sequence.</p>
<p>Let-expressions themselves have type <code>unit</code>.</p>
<h3 id="variable-assignments"><a class="header" href="#variable-assignments">Variable Assignments</a></h3>
<p>In addition to reading the value of an variable, you might also want to mutate it. Patina has <em>assignment expressions</em> for this purpose. For example,</p>
<pre><code class="language-rust no_run noplayground">{
  let x: int = -1;
  x = x + 2;
  print_int(x)
}
</code></pre>
<p>initializes a new integer variable <code>x</code> with value <code>-1</code>, increments the value of <code>x</code> by <code>2</code>, and prints <code>1</code> to the screen.</p>
<h3 id="while-expressions"><a class="header" href="#while-expressions">While Expressions</a></h3>
<p>Patina's <em>while expressions</em> are very similar to the while loops in other imperative languages like C or Java. A while expression has a <em>condition</em> and a <em>body sequence</em>:</p>
<pre><code class="language-rust no_run noplayground">while cond {
  e1;
  e2;
  ..;
  en
}
</code></pre>
<p>To evaluate a while expression, we first evaluate its condition:</p>
<ul>
<li>If it is <code>true</code>, then we evaluate the body sequence repeatedly until the condition evaluates to <code>false</code>.</li>
<li>Otherwise, the body sequence will not be evaluated.</li>
</ul>
<p>For example,</p>
<pre><code class="language-rust no_run noplayground">{
  let i: int = 0;
  while i &lt; 3 {
    i = i + 1
  };
  print_int(i)
}
</code></pre>
<p>will print <code>3</code> to the standard output.</p>
<p>The condition should have type <code>bool</code>, and the body have type <code>unit</code>. The overall while expression will have type <code>unit</code>.</p>
<p>For simplicity, Patina has no <code>break</code> or <code>continue</code> constructs.</p>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p>For those of you familiar with Java or C, the semicolon has a different meaning here. In Java or C, a semicolon signals the end of a simple statement. In Patina, a semicolon is part of the syntax for sequence expressions, so they must appear together with a surrounding pair of curly braces. Moreover, a semicolon is always sandwiched between two expressions, and it means that &quot;we don't care the value of the first expression, but please evaluate it before you evaluate the expression after the semicolon.&quot;</p>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../overview/boolean.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../overview/arrays.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../overview/boolean.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../overview/arrays.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
